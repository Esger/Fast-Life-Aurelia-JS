{"version":3,"sources":["app.js","environment.js","main.js","resources/index.js","resources/services/life-worker-service.js","resources/elements/controls.js","resources/elements/life.js","resources/elements/main.js","resources/elements/settings.js","resources/elements/stats.js","resources/elements/story.js","resources/elements/tabs.js"],"names":["App","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","LifeWorkerService","eventAggregator","ea","_buffer","_fillSlotIndex","_getSlotIndex","_maxIndex","init","w","h","liferules","wrkr","Worker","onmessage","e","data","cells","publish","workerData","message","postMessage","resize","inArea","cell","filter","clear","fillRandom","changeRules","rules","addCell","xy","push","getGeneration","ControlsCustomElement","startPulsor","clearPulsor","timeOut","addListeners","stop","step","startNstop","setTimeoutInterval","subscribe","LifeCustomElement","lifeWorkerService","statusUpdateHandle","lfWs","cellSize","cellsAlive","speedInterval","trails","running","opacity","cellCounts","lastMean","stableCountDown","grid","before","performance","now","deltaTime","lifeSteps","prevSteps","showStats","steps","speed","Math","floor","cellCount","generations","clearSpace","ctx","fillStyle","fillRect","canvas","width","height","ctxOffscreen","animateStep","checkStable","drawCells","stable","setTimeout","generate","offScreen","drawgrid","i","length","drawImage","offScreenCanvas","canvasWidth","canvasHeight","onScreen","max","maxX","maxY","y","oddStep","x","initLife","document","getElementById","getContext","createElement","setSpaceSize","resetSteps","spaceWidth","spaceHeight","subscribeOnFirstData","slowDown","speedWas","fullSpeed","clearInterval","setInterval","subscribeOnce","event","mouseX","offsetX","pageX","offsetLeft","realX","mouseY","offsetY","pageY","offsetTop","realY","response","attached","slice","average","arr","reduce","p","c","abs","meanOver100Gens","MainCustomElement","SettingsCustomElement","selectedPreset","presets","rule","undefined","name","cellSizeExp","minCellSize","maxCellSize","setPreset","toggleTrails","toggleGrid","setCellSize","rulesSet","split","stayRulesString","newRulesString","newRules","includes","publishRules","compareToPresets","stayRules","trueIndexesString","index","map","join","rulesString","findRulesString","preset","findIndex","setRules","pow","StatsCustomElement","StoryCustomElement","TabsCustomElement","tabs","title","active","activateTab","forEach","tab"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n    constructor() {\n    }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\n\nexport class LifeWorkerService {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n\n        this._buffer = [];\n        this._fillSlotIndex = 0;\n        this._getSlotIndex = 0;\n        this._maxIndex = 9;\n    }\n\n    get cells() {\n        return this._buffer;\n    }\n\n    init(w, h, liferules) {\n        this.wrkr = new Worker('./assets/life-worker.js');\n        this._buffer = [];\n        this.wrkr.onmessage = (e) => {\n            this._buffer = e.data.cells || [];\n            this.ea.publish('dataReady');\n        };\n        let workerData = {\n            message: 'initialize',\n            w: w,\n            h: h,\n            liferules: liferules\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n    resize(w, h) {\n        let inArea = cell => {\n            return (cell[0] <= w) && (cell[1] <= h);\n        };\n        this._buffer = this._buffer.filter(inArea);\n        let workerData = {\n            message: 'setSize',\n            w: w,\n            h: h\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n    clear() {\n        // this._buffer = [];\n        let workerData = {\n            message: 'clear',\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n    fillRandom() {\n        let workerData = {\n            message: 'fillRandom',\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n    changeRules(rules) {\n        let workerData = {\n            message: 'rules',\n            rules: rules\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n    addCell(xy) {\n        let cells = this._buffer;\n        if (xy) {\n            cells.push(xy);\n        }\n        let workerData = {\n            message: 'setCells',\n            cells: cells\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n    getGeneration() {\n        let workerData = {\n            message: 'step'\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n}\n","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class ControlsCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.startPulsor = true;\n        this.clearPulsor = false;\n        this.timeOut = 0;\n        this.addListeners();\n    }\n\n    clear() {\n        this.ea.publish('clear');\n        this.clearPulsor = false;\n        this.startPulsor = true;\n    }\n\n    stop() {\n        this.ea.publish('stop');\n    }\n\n    step() {\n        this.ea.publish('step');\n        this.startPulsor = false;\n    }\n\n    start() {\n        this.ea.publish('start');\n        this.startPulsor = false;\n    }\n\n    startNstop() {\n        this.ea.publish('startNstop');\n        this.startPulsor = false;\n    }\n\n    fillRandom() {\n        this.ea.publish('fillRandom');\n    }\n\n    setTimeoutInterval() {\n        this.ea.publish('timeoutInterval', this.timeOut);\n    }\n\n    addListeners() {\n        this.ea.subscribe('cellSize', response => {\n            this.clearPulsor = true;\n        });\n    }\n\n}","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\nimport { LifeWorkerService } from 'resources/services/life-worker-service';\n\n@inject(EventAggregator, LifeWorkerService)\nexport class LifeCustomElement {\n\n    statusUpdateHandle = null;\n\n    // TODO try this https://hacks.mozilla.org/2011/12/faster-canvas-pixel-manipulation-with-typed-arrays/\n    constructor(eventAggregator, lifeWorkerService) {\n        this.ea = eventAggregator;\n        this.lfWs = lifeWorkerService;\n        this.cellSize = 2;\n        this.cellsAlive = 0;\n        this.liferules = [];\n        this.speedInterval = 0;\n        this.trails = true;\n        this.running = false;\n        this.opacity = 1 - this.trails * 0.9;\n        this.cellCounts = [];\n        this.lastMean = 0;\n        this.stableCountDown = 20;\n        this.grid = false;\n        this.before = performance.now();\n        this.now = performance.now();\n        this.deltaTime = this.now - this.before;\n        this.lifeSteps = 0;\n        this.prevSteps = this.lifeSteps;\n    }\n\n    showStats() {\n        this.before = this.now;\n        this.now = performance.now();\n        this.deltaTime = this.now - this.before;\n        let steps = this.lifeSteps - this.prevSteps;\n        this.prevSteps = this.lifeSteps;\n\n        let speed = Math.floor(1000 * steps / this.deltaTime);\n        this.ea.publish('stats', {\n            cellCount: this.cellsAlive,\n            generations: this.lifeSteps,\n            speed: speed\n        });\n    }\n\n    clearSpace() {\n        this.ctx.fillStyle = \"rgb(255, 255, 255)\";\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        this.ctxOffscreen.fillStyle = \"rgb(255, 255, 255)\";\n        this.ctxOffscreen.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    get meanOver100Gens() {\n        this.cellCounts.push(this.cellsAlive);\n        this.cellCounts = this.cellCounts.slice(-100);\n        const average = arr => arr.reduce((p, c) => p + c, 0) / arr.length;\n        return average(this.cellCounts);\n    }\n\n    get stable() {\n        if (Math.abs(this.meanOver100Gens - this.cellsAlive) < 7) {\n            this.stableCountDown -= 1;\n        } else {\n            this.stableCountDown = 20;\n        }\n        return this.stableCountDown <= 0;\n    }\n\n    animateStep(checkStable) {\n        this.drawCells(true);\n        if (this.running && (!this.stable && checkStable || !checkStable)) {\n            setTimeout(() => { this.animateStep(checkStable); }, this.speedInterval);\n        } else {\n            this.stop();\n        }\n    }\n\n    drawCells(generate) {\n        if (generate) this.lfWs.getGeneration();\n        let cells = this.lfWs.cells;\n        const cellSize = this.cellSize;\n        const offScreen = this.ctxOffscreen;\n        offScreen.fillStyle = \"rgba(255, 255, 255, \" + this.opacity + \")\";\n        offScreen.fillRect(0, 0, this.canvas.width, this.canvas.height);\n        if (this.grid) {\n            this.drawgrid();\n        }\n        offScreen.fillStyle = \"rgba(128, 128, 0, 1)\";\n        let i = cells.length - 1;\n        while (i >= 0) {\n            let cell = cells[i]; i -= 1;\n            offScreen.fillRect(cell[0] * cellSize, cell[1] * cellSize, cellSize, cellSize);\n        }\n        this.ctx.drawImage(this.offScreenCanvas, 0, 0, this.canvasWidth, this.canvasHeight);\n        this.cellsAlive = cells.length;\n        this.lifeSteps += 1;\n    }\n\n    drawgrid(onScreen) {\n        const offScreen = this.ctxOffscreen;\n        const cellSize = Math.max(this.cellSize, 4);\n        const maxX = this.canvas.width - cellSize;\n        const maxY = this.canvas.height - cellSize;\n        const step = cellSize * 2;\n        offScreen.fillStyle = \"rgba(128, 128, 128, 0.1)\";\n        let y = 0;\n        let oddStep = 0;\n        for (; y < maxY; y += cellSize) {\n            let x = oddStep;\n            oddStep = (oddStep + cellSize) % step;\n            for (; x < maxX; x += step) {\n                offScreen.fillRect(x, y, cellSize, cellSize);\n            }\n        }\n        if (onScreen) {\n            this.ctx.drawImage(this.offScreenCanvas, 0, 0, this.canvasWidth, this.canvasHeight);\n        }\n    }\n\n    initLife() {\n        this.opacity = 1 - this.trails * 0.9;\n        this.canvas = document.getElementById('life');\n        this.ctx = this.canvas.getContext('2d');\n        this.canvasWidth = this.canvas.width;\n        this.canvasHeight = this.canvas.height;\n        this.offScreenCanvas = document.createElement('canvas');\n        this.offScreenCanvas.width = this.canvasWidth;\n        this.offScreenCanvas.height = this.canvasHeight;\n        this.ctxOffscreen = this.offScreenCanvas.getContext('2d');\n        this.setSpaceSize();\n        this.resetSteps();\n        this.lfWs.init(this.spaceWidth, this.spaceHeight, this.liferules);\n        this.subscribeOnFirstData();\n        this.lfWs.fillRandom();\n    }\n\n    setSpaceSize() {\n        this.spaceWidth = Math.floor(this.canvasWidth / this.cellSize);\n        this.spaceHeight = Math.floor(this.canvasHeight / this.cellSize);\n    }\n\n    resetSteps() {\n        this.lifeSteps = 0; // Number of iterations / steps done\n        this.prevSteps = 0;\n    }\n\n    slowDown() {\n        this.speedWas = this.speedInterval;\n        this.speedInterval = 500;\n    }\n\n    fullSpeed() {\n        this.speedInterval = this.speedWas;\n    }\n\n    clear() {\n        this.stop();\n        this.resetSteps();\n        this.lfWs.clear();\n    }\n\n    stop() {\n        this.running = false;\n        if (this.statusUpdateHandle) {\n            setTimeout(() => {\n                clearInterval(this.statusUpdateHandle);\n                this.statusUpdateHandle = null;\n            }, 333);\n        }\n    }\n\n    start() {\n        this.running = true;\n        this.animateStep(false);\n        this.statusUpdateHandle = setInterval(() => { this.showStats(); }, 500);\n    }\n\n    startNstop() {\n        this.running = true;\n        this.animateStep(true); // true checks for stable life\n        this.statusUpdateHandle = setInterval(() => { this.showStats(); }, 500);\n    }\n\n    subscribeOnFirstData() {\n        this.ea.subscribeOnce('dataReady', () => {\n            this.drawCells();\n        });\n    }\n\n    addCell(event) {\n        const mouseX = (event.offsetX) ? event.offsetX : (event.pageX - this.offsetLeft);\n        const realX = Math.floor(mouseX / this.cellSize);\n        const mouseY = (event.offsetY) ? event.offsetY : (event.pageY - this.offsetTop);\n        const realY = Math.floor(mouseY / this.cellSize);\n        this.ctx.fillStyle = \"#d4d4d4\";\n        this.ctx.fillRect(realX * this.cellSize, realY * this.cellSize, this.cellSize, this.cellSize);\n        this.subscribeOnFirstData();\n        this.lfWs.addCell([realX, realY]);\n    }\n\n    addListeners() {\n        this.ea.subscribe('clear', () => {\n            this.clear();\n            this.subscribeOnFirstData();\n        });\n        this.ea.subscribe('stop', () => {\n            this.stop();\n        });\n        this.ea.subscribe('start', () => {\n            this.start();\n        });\n        this.ea.subscribe('startNstop', () => {\n            this.startNstop();\n        });\n        this.ea.subscribe('step', () => {\n            this.lfWs.getGeneration();\n            this.subscribeOnFirstData();\n        });\n        this.ea.subscribe('fillRandom', () => {\n            this.lfWs.fillRandom();\n            this.subscribeOnFirstData();\n        });\n        this.ea.subscribe('timeoutInterval', response => {\n            this.speedInterval = response;\n        });\n        this.ea.subscribe('toggleTrails', () => {\n            this.trails = !this.trails;\n            this.opacity = 1 - this.trails * 0.9;\n        });\n        this.ea.subscribe('toggleGrid', () => {\n            this.grid = !this.grid;\n            if (this.grid) {\n                this.drawgrid(true);\n            }\n        });\n        this.ea.subscribe('cellSize', response => {\n            this.cellSize = response;\n            this.setSpaceSize();\n            this.lfWs.resize(this.spaceWidth, this.spaceHeight);\n            this.subscribeOnFirstData();\n        });\n        this.ea.subscribe('lifeRules', response => {\n            this.liferules = response.liferules;\n            if (response.init) {\n                this.initLife();\n            } else {\n                this.lfWs.changeRules(this.liferules);\n            }\n        });\n    }\n\n    attached() {\n        this.addListeners();\n    }\n\n}","export class MainCustomElement {\n    constructor() {\n\n    }\n}","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\n\nexport class SettingsCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.liferules = [];\n        this.selectedPreset = 6;\n        this.presets = [\n            { rule: undefined, name: '' },\n            { rule: \"125/36\", name: \"2&times;2\" },\n            { rule: \"34/34\", name: \"34 Life\" },\n            { rule: \"1358/357\", name: \"Amoeba\" },\n            { rule: \"4567/345\", name: \"Assimilation\" },\n            { rule: \"235678/378\", name: \"Coagulations\" },\n            { rule: \"23/3\", name: \"Conway&rsquo;s Life\" },\n            { rule: \"45678/3\", name: \"Coral\" },\n            { rule: \"34678/3678\", name: \"Day &amp; Night\" },\n            { rule: \"5678/35678\", name: \"Diamoeba\" },\n            { rule: \"012345678/3\", name: \"Flakes\" },\n            { rule: \"1/1\", name: \"Gnarl\" },\n            { rule: \"23/36\", name: \"High Life\" },\n            // { rule: \"34678/0123478/2\", name: \"Inverse Life\" }, \n            { rule: \"5/345\", name: \"Long Life\" },\n            { rule: \"12345/3\", name: \"Maze\" },\n            { rule: \"1234/3\", name: \"Mazectric\" },\n            { rule: \"245/368\", name: \"Move\" },\n            { rule: \"238/357\", name: \"Pseudo Life\" },\n            { rule: \"1357/1357\", name: \"Replicator\" },\n            { rule: \"/2\", name: \"Seeds\" },\n            { rule: \"/234\", name: \"Serviettes\" },\n            { rule: \"235678/3678\", name: \"Stains\" },\n            { rule: \"2345/45678\", name: \"Walled Cities\" },\n            { rule: \"1/12\", name: \"Sierpinski\" }\n        ];\n        this.grid = false;\n        this.trails = true;\n        this.cellSizeExp = 1;\n        this.minCellSize = 0;\n        this.maxCellSize = 5;\n        this.setPreset();\n    }\n\n    get cellSize() {\n        return Math.pow(2, this.cellSizeExp);\n    }\n\n    toggleTrails() {\n        this.ea.publish('toggleTrails', this.trails);\n    }\n\n    toggleGrid() {\n        this.ea.publish('toggleGrid', this.grid);\n    }\n\n    setCellSize() {\n        this.ea.publish('cellSize', this.cellSize);\n    }\n\n    setPreset() {\n        if (this.selectedPreset > 0) {\n            let rulesSet = this.presets[this.selectedPreset].rule.split('/');\n            let stayRulesString = rulesSet[0];\n            let newRulesString = rulesSet[1];\n            let newRules = [];\n            let i = 0;\n            for (let i = 0; i < 9; i++) {\n                newRules[i] = newRulesString.includes(i);\n                newRules[i + 10] = stayRulesString.includes(i);\n            }\n            this.liferules = newRules;\n            this.publishRules(false);\n        }\n    }\n\n    publishRules(init) {\n        this.ea.publish('lifeRules', {\n            liferules: this.liferules,\n            init: init\n        });\n    }\n\n    compareToPresets() {\n        let newRules = this.liferules.slice(0, 9);\n        let stayRules = this.liferules.slice(10, 19);\n        let trueIndexesString = (rule, index) => {\n            return rule ? index : '';\n        };\n        let stayRulesString = stayRules.map(trueIndexesString).join('');\n        let newRulesString = newRules.map(trueIndexesString).join('');\n        let rulesString = stayRulesString + '/' + newRulesString;\n        let findRulesString = preset => { return preset.rule == rulesString; };\n        let index = this.presets.findIndex(findRulesString);\n        this.selectedPreset = (index > -1) ? index : undefined;\n    }\n\n    setRules(i) {\n        this.liferules[i] = !this.liferules[i];\n        this.compareToPresets();\n        this.publishRules(false);\n    }\n\n    attached() {\n        this.publishRules(true);\n    }\n}","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class StatsCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.speed = 0;\n        this.cellCount = 0;\n        this.generations = 0;\n    }\n\n    addListeners() {\n        this.ea.subscribe('stats', response => {\n            this.cellCount = response.cellCount;\n            this.generations = response.generations;\n            this.speed = response.speed;\n        });\n    }\n\n    attached() {\n        this.addListeners();\n    }\n\n}","export class StoryCustomElement { }","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\n\nexport class TabsCustomElement {\n\n    constructor(eventAggregator) {\n        this.tabs = [\n            {\n                title: 'Life Rules',\n                active: true\n            },\n            {\n                title: 'Story',\n                active: false\n            }\n        ]\n    }\n\n    activateTab(i) {\n        let tabs = this.tabs.slice();\n        tabs.forEach(tab => {\n            tab.active = false;\n        });\n        tabs[i].active = true;\n        this.tabs = tabs;\n    }\n\n}"],"sourceRoot":"../src"}