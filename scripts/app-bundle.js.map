{"version":3,"sources":["app.js","environment.js","main.js","resources/index.js","resources/services/life-worker-service.js","resources/elements/controls.js","resources/elements/life.js","resources/elements/main.js","resources/elements/stats.js","resources/elements/tabs.js"],"names":["App","message","debug","testing","configure","Promise","config","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","LifeWorkerService","eventAggregator","ea","emptyStack","_roundStack","slice","fillSlotPointer","maxIndex","started","init","w","h","rules","cellSize","cells","wrkr","terminate","Worker","onmessage","e","data","length","workerData","generations","getSlotPointer","postMessage","changeRules","getBatch","pointer","emptySlotPointer","setTimeout","ControlsCustomElement","trails","pulsor","cellSizeExp","minCellSize","maxCellSize","clear","publish","stop","step","toggleTrails","setCellSize","Math","pow","LifeCustomElement","lifeWorkerService","lfWs","cellsAlive","speedHandle","running","opacity","cellCounts","lastMean","stableCountDown","showStats","speed","lifeSteps","prevSteps","cellCount","clearSpace","ctx","fillStyle","fillRect","canvas","width","height","animateStep","drawFromStack","stable","offScreen","ctxOffscreen","i","cell","x","y","drawImage","offScreenCanvas","canvasWidth","canvasHeight","initLife","document","getElementById","getContext","spaceWidth","floor","spaceHeight","createElement","liferules","clearInterval","setInterval","addListeners","subscribe","response","attached","push","average","arr","reduce","p","c","abs","meanOver100Gens","MainCustomElement","StatsCustomElement","stackSize","TabsCustomElement","selectedPreset","presets","rule","name","setPreset","split","stayRules","newRules","includes","setRules"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {\n    inject,\n    bindable\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\n\nexport class LifeWorkerService {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n\n        this.emptyStack = [[], [], [], [], [], [], [], [], [], []];\n        this._roundStack = this.emptyStack.slice();\n        this.fillSlotPointer = 0;\n        this.maxIndex = 9;\n        this.started = false;\n    }\n\n    get cells() {\n        let pointer = this.getSlotPointer;\n        this.getSlotPointer = (this.getSlotPointer + 1) % this._roundStack.length;\n        if (this.started) {\n            let emptySlotPointer = (pointer == 0) ? this.maxIndex : pointer - 1;\n            // this._roundStack[emptySlotPointer] = [];\n            setTimeout(() => { this.getBatch(); });\n        }\n        this.started = true;\n        return this._roundStack[pointer];\n    }\n\n    get stackSize() {\n        return this._roundStack.length;\n    }\n\n    init(w, h, rules, cellSize, cells) {\n        if (this.wrkr) {\n            this.wrkr.terminate();\n        }\n        this.wrkr = new Worker('./assets/life-worker.js');\n        this.wrkr.onmessage = (e) => {\n            if (e.data && e.data.message == 'newGeneration') {\n                this._roundStack[this.fillSlotPointer] = e.data.cells;\n                this.fillSlotPointer = (this.fillSlotPointer + 1) % this._roundStack.length;\n            }\n        };\n        this._roundStack = this.emptyStack.slice();\n        this.rules = rules;\n        this.cellSize = cellSize;\n        let workerData = {\n            message: 'start',\n            w: w,\n            h: h,\n            rules: rules,\n            generations: this._roundStack.length - 1,\n            cells: cells\n        };\n        this.getSlotPointer = 0;\n        this.wrkr.postMessage(workerData);\n    }\n\n    changeRules(rules) {\n        let workerData = {\n            message: 'rules',\n            rules: rules\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n    getBatch(cells) {\n        let workerData = {\n            message: 'resume',\n            rules: this.rules,\n            generations: 1,\n            cells: cells\n        };\n        this.wrkr.postMessage(workerData);\n    }\n\n}\n","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class ControlsCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.trails = true;\n        this.pulsor = true;\n        this.cellSizeExp = 1;\n        this.minCellSize = 0;\n        this.maxCellSize = 5;\n    }\n\n    get cellSize() {\n        return Math.pow(2, this.cellSizeExp);\n    }\n\n    clear() {\n        this.ea.publish('clear');\n    }\n    stop() {\n        this.ea.publish('stop');\n    }\n    step() {\n        this.ea.publish('step');\n        this.pulsor = false;\n    }\n    start() {\n        this.ea.publish('start');\n        this.pulsor = false;\n    }\n    toggleTrails() {\n        this.ea.publish('toggleTrails', this.trails);\n    }\n    setCellSize() {\n        this.ea.publish('cellSize', this.cellSize);\n    }\n\n}","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\nimport { LifeWorkerService } from 'resources/services/life-worker-service';\n\n@inject(EventAggregator, LifeWorkerService)\nexport class LifeCustomElement {\n\n    // TODO try this https://hacks.mozilla.org/2011/12/faster-canvas-pixel-manipulation-with-typed-arrays/\n    constructor(eventAggregator, lifeWorkerService) {\n        this.ea = eventAggregator;\n        this.lfWs = lifeWorkerService;\n        this.cellSize = 2;\n        this.cellsAlive = 0;\n        this.trails = true;\n        this.speedHandle = null;\n        this.running = false;\n        this.opacity = 1 - this.trails * 0.9;\n        this.cellCounts = [];\n        this.lastMean = 0;\n        this.stableCountDown = 20;\n    }\n\n    showStats() {\n        this.speed = this.lifeSteps - this.prevSteps;\n        this.prevSteps = this.lifeSteps;\n        this.ea.publish('stats', {\n            cellCount: this.cellsAlive,\n            generations: this.lifeSteps,\n            speed: this.speed * 2\n        });\n    }\n\n    clearSpace() {\n        this.ctx.fillStyle = \"rgb(255, 255, 255)\";\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    get meanOver100Gens() {\n        this.cellCounts.push(this.cellsAlive);\n        this.cellCounts = this.cellCounts.slice(-100);\n        const average = arr => arr.reduce((p, c) => p + c, 0) / arr.length;\n        return average(this.cellCounts);\n    }\n\n    get stable() {\n        if (Math.abs(this.meanOver100Gens - this.cellsAlive) < 7) {\n            this.stableCountDown -= 1;\n        } else {\n            this.stableCountDown = 20;\n        }\n        return this.stableCountDown <= 0;\n    }\n\n    animateStep() {\n        this.drawFromStack();\n        if (this.running && !this.stable) {\n            setTimeout(() => { this.animateStep(); });\n        } else {\n            this.stop();\n        }\n    }\n\n    drawFromStack() {\n        let cells = this.lfWs.cells;\n        const cellSize = this.cellSize;\n        const offScreen = this.ctxOffscreen;\n        if (cells) {\n            offScreen.fillStyle = \"rgba(255, 255, 255, \" + this.opacity + \")\";\n            offScreen.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n            offScreen.fillStyle = \"rgba(128, 128, 0, 1)\";\n            let i = cells.length - 1;\n            while (i >= 0) {\n                let cell = cells[i]; i -= 1;\n                offScreen.fillRect(cell.x * cellSize, cell.y * cellSize, cellSize, cellSize);\n            }\n            this.ctx.drawImage(this.offScreenCanvas, 0, 0, this.canvasWidth, this.canvasHeight);\n            this.cellsAlive = cells.length;\n            this.lifeSteps += 1;\n        }\n    }\n\n    initLife() {\n        this.opacity = 1 - this.trails * 0.9;\n        this.canvas = document.getElementById('life');\n        this.ctx = this.canvas.getContext('2d');\n        this.canvasWidth = this.canvas.width;\n        this.canvasHeight = this.canvas.height;\n        this.spaceWidth = Math.floor(this.canvasWidth / this.cellSize);\n        this.spaceHeight = Math.floor(this.canvasHeight / this.cellSize);\n\n        this.offScreenCanvas = document.createElement('canvas');\n        this.offScreenCanvas.width = this.canvasWidth;\n        this.offScreenCanvas.height = this.canvasHeight;\n        this.ctxOffscreen = this.offScreenCanvas.getContext('2d');\n\n        this.liferules = [\n            false, false, false, true, false, false, false, false, false, false,\n            false, false, true, true, false, false, false, false, false\n        ];\n        this.lifeSteps = 0; // Number of iterations / steps done\n        this.lfWs.init(this.spaceWidth, this.spaceHeight, this.liferules, this.cellSize);\n        if (this.speedHandle) {\n            clearInterval(this.speedHandle);\n        }\n        this.speedHandle = setInterval(() => { this.showStats(); }, 500);\n    }\n\n    clear() {\n        this.running = false;\n        this.initLife();\n        this.clearSpace();\n    }\n\n    stop() {\n        this.running = false;\n        clearInterval(this.speedHandle);\n        setTimeout(this.showStats, 500);\n    }\n\n    start() {\n        this.running = true;\n        this.animateStep();\n    }\n\n    addListeners() {\n        this.ea.subscribe('clear', () => {\n            this.clear();\n        });\n        this.ea.subscribe('stop', () => {\n            this.stop();\n        });\n        this.ea.subscribe('start', () => {\n            this.start();\n        });\n        this.ea.subscribe('step', () => {\n            this.drawFromStack();\n        });\n        this.ea.subscribe('toggleTrails', () => {\n            this.trails = !this.trails;\n            this.opacity = 1 - this.trails * 0.9;\n        });\n        this.ea.subscribe('cellSize', response => {\n            this.cellSize = response;\n            this.stop();\n            this.initLife();\n            this.start();\n        });\n        this.ea.subscribe('lifeRules', response => {\n            this.liferules = response;\n            this.lfWs.changeRules(this.liferules);\n        });\n    }\n\n    attached() {\n        this.initLife();\n        this.addListeners();\n    }\n\n\n}","export class MainCustomElement {\n    constructor() {\n\n    }\n}","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\nexport class StatsCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.speed = 0;\n        this.stackSize = 0;\n        this.cellCount = 0;\n        this.generations = 0;\n    }\n\n    addListeners() {\n        this.ea.subscribe('stats', response => {\n            this.cellCount = response.cellCount;\n            this.generations = response.generations;\n            this.speed = response.speed;\n            this.stackSize = response.stackSize;\n        });\n    }\n\n    attached() {\n        this.addListeners();\n    }\n\n}","import {\n    inject\n} from 'aurelia-framework';\nimport {\n    EventAggregator\n} from 'aurelia-event-aggregator';\n\n@inject(EventAggregator)\n\nexport class TabsCustomElement {\n\n    constructor(eventAggregator) {\n        this.ea = eventAggregator;\n        this.liferules = [];\n        this.selectedPreset = 5;\n        this.presets = [\n            { rule: \"125/36\", name: \"2&times;2\" },\n            { rule: \"34/34\", name: \"34 Life\" },\n            { rule: \"1358/357\", name: \"Amoeba\" },\n            { rule: \"4567/345\", name: \"Assimilation\" },\n            { rule: \"235678/378\", name: \"Coagulations\" },\n            { rule: \"23/3\", name: \"Conway&rsquo;s Life\" },\n            { rule: \"45678/3\", name: \"Coral\" },\n            { rule: \"34678/3678\", name: \"Day &amp; Night\" },\n            { rule: \"5678/35678\", name: \"Diamoeba\" },\n            { rule: \"012345678/3\", name: \"Flakes\" },\n            { rule: \"1/1\", name: \"Gnarl\" },\n            { rule: \"23/36\", name: \"High Life\" },\n            // { rule: \"34678/0123478/2\", name: \"Inverse Life\" }, \n            { rule: \"5/345\", name: \"Long Life\" },\n            { rule: \"12345/3\", name: \"Maze\" },\n            { rule: \"1234/3\", name: \"Mazectric\" },\n            { rule: \"245/368\", name: \"Move\" },\n            { rule: \"238/357\", name: \"Pseudo Life\" },\n            { rule: \"1357/1357\", name: \"Replicator\" },\n            { rule: \"/2\", name: \"Seeds\" },\n            { rule: \"/234\", name: \"Serviettes\" },\n            { rule: \"235678/3678\", name: \"Stains\" },\n            { rule: \"2345/45678\", name: \"Walled Cities\" },\n        ];\n        this.setPreset();\n    }\n\n    setPreset() {\n        let rules = this.presets[this.selectedPreset].rule.split('/');\n        let stayRules = rules[0];\n        let newRules = rules[1];\n        let i = 0;\n        for (let i = 0; i < 10; i++) {\n            this.liferules[i] = stayRules.includes(i);\n            this.liferules[i + 10] = newRules.includes(i);\n        }\n        this.liferules = this.liferules.slice(0, 19);\n        this.ea.publish('lifeRules', this.liferules);\n    }\n\n    setRules(i) {\n        this.liferules[i] = !this.liferules[i];\n        // this.ea.publish('lifeRules', this.liferules);\n    }\n\n    attached() {\n        // this.ea.publish('lifeRules', this.liferules);\n    }\n\n}"],"sourceRoot":"../src"}